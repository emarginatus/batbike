box: emarginatus/render_website
build:
  steps:
    - script:
        code: |
          current_branch = "$WERCKER_GIT_BRANCH"
          wrong_branch = "gh-pages"
          if [ $current_branch == $wrong_branch ]; then
            echo "$wrong_branch branch: nothing to do"
            exit 0
          fi
          Rscript -e "rmarkdown::render_site(encoding = 'UTF-8')"
deploy:
  steps:
    - lukevivier/gh-pages:
      token: $GITHUB_TOKEN
      basedir: _site
